# 課題 1

## スナップショットテストとは？

事前にテスト対象（コンポーネントなりページなり）の DOM 構造（DOM テキスト？HTML）を保存しておき、変更前後で比較するテスト。
表示されたものの画像を取るわけではなくあくまで DOM の比較なので例えばグローバルスタイルの変更などに追従できない可能性もあるが、手軽で早い。最初のスナップショットが正しいかどうかは別途保証する必要がある（目視とか）。

## どのような不具合が防止できるか？（3 つ具体例）

- 特定の条件で特定の文言がでるかのテスト（マルバツゲームにおいて、◯ が勝利した時に Winner: O と出るかどうか）
- 同じコンポーネントで表示パターン数が膨大なもの（マルバツゲームの勝利判定条件を変更したいときなどに、網羅的なパターンを用意しておいて、結果が変わらないかどうかチェック）
- クラス名等のタイポチェック

## スナップショットテストでは防止できない不具合（3 つ具体例）

- 最初のスナップショットが間違えていた場合：最初から間違っていたら検出できない
- グローバルスタイル等 DOM 構造に依存しない形でスタイル等が変更された場合：サイト全体でフォントを変更したとか
- ブラウザ間差異による不具合：Safari だけ表示がおかしいとか

# 課題 2

スナップショットテスト用ブランチを作成
https://github.com/kzk4043/react_tutorial/tree/feat/snapshot-test

## どんな情報が記載されているでしょうか？

```js
exports[`Tic-Tac-Toe/Square X smoke-test 1`] = `
<button class="square">
  X
</button>
`;
```

- 書式は謎だが、js？exports というオブジェクトに`Tic-Tac-Toe/Square X smoke-test 1`をキーにして HTML を突っ込んでるのかな？
- `Tic-Tac-Toe/Square`は title
- `X`は story 名（`export const X = {`の X）
- `smoke-test`はなんだ？play function 使ってるやつは`play-test`になっていた。play function 使ってないやつは smoke-test？→[スモークテスト](https://www.qbook.jp/column/1588.html)
- `1`はなんだろ…全部 1 になってる。何で変わるのか不明
- あとはレンダリングされた HTML

# 課題 3

- スナップショットファイルはコミットするべきか
  - すべき。正解の HTML が共有されてないと意味がない。
- 現在 storyshots は deprecated になっている。何を使うべきか
  - test-runner または portable stories
- スナップショットファイルを更新するにはどうすればよいか
  - -u オプションを付与するか、--watch オプションでインタラクティブに選択するか
