# 課題 1

## テスト駆動開発のメリットと、デメリット

- メリット
  - 早期バグ検知
  - テストカバレッジが上がりやすい
  - 仕様を明確にしやすい
  - テスタブルな実装に自然となる
  - 修正の心理的負担軽減
- デメリット
  - 慣れてない、やったことない、社内に知見がない → 学習コスト
  - 自動テストを書くコスト
  - テストのメンテナンスコスト

## 用語

- 三点（三角）測量
  - 新しい機能やアルゴリズムを実装する際に、複数の異なるテストケースによってその実装を確定させていく方法
  - そのテストがたまたま通過したということが起こらないように、状況によって、２つ以上の値を使用しテストを書く。
- レッド・グリーン・リファクタリング
  - レッド (Red)​
    - 最初に、まだ存在しない機能や修正に対するテストを書く。このテストは最初は失敗する (レッド状態) ことが期待される。
  - ​ グリーン (Green)​
    - 書かれたテストをパスさせるために必要な最小限のコードを書く。テストが通る (グリーン状態) ことが保証される。
  - ​ リファクタリング (Refactor)​
    - テストがパスした後、コードの品質を高めるためのリファクタリングを行う。重複の排除やコードの整理を行い、機能は変えずに保守性を向上。
    - テストを通すために発生した重複を全て除去
- 仮実装
  - コードでまずベタ書きの値を使い、実装を進めつつ、徐々に変数に置き換える。
  - どんな手段であってもとにかくテストを成功させる
- 明確（明白）な実装
  - 「こう実装すれば絶対にうまくいく」と浮かんでいる段階でわざわざ仮実装しなくても、その実装を落とし込めばいい

参考

- gpt
- https://qiita.com/takagi-shun/items/a7465ccaffbf6108e1b6
- https://dev.classmethod.jp/articles/what-tdd/

きれいにする → 動く、ではなく、動く → きれいにする、を目指すもの？

1.  きれいにする → 動く：せっかくきれいなのに崩したくない
2.  動く → きれいにする：動くんだからいいじゃん

どちらのアプローチも、「きれいで動く」状態に行くには壁がある。TDD は２における壁を低くする手法？
微妙に用語揺れが起きてるのはなんなんだろ。

## BDD との違い

TDD（テスト駆動開発）と BDD（ビヘイビア駆動開発）は、両者ともにテストを先行して書くことを重視

### TDD（Test-Driven Development）

提唱者 ​：Kent Beck

基本概念 ​：

1.  ​Red​：まず、失敗するテストケースを作成します。これはまだ実装されていない機能のため、必ず失敗します。
2.  ​Green​：テストを通過させるために、最小限のコードを実装します。
3.  ​Refactor​：コードを清書し、設計を改善します。このとき、テストが再度失敗しないようにします。

目的 ​：

- コードの品質向上
- 迅速なフィードバックループの確立
- リグレッションテストの機能

### BDD（Behavior-Driven Development）

提唱者 ​：Dan North

基本概念 ​：

1.  ​Scenario Writing​：自然言語（例：Gherkin 形式）で仕様を書くことにより、仕様や振る舞いを理解しやすくします。例えば、「Given-When-Then」というフォーマットで書かれます。
    1.  ​Given​：前提条件
    2.  ​When​：実行するアクション
    3.  ​Then​：期待する結果
2.  ​Shared Understanding​：開発者、テスター、ビジネス担当者が共通の理解を持つようにし、コミュニケーションのギャップを埋めます。
3.  ​Automation​：シナリオに基づいて、自動化されたテストを実装します。

目的 ​：

- 共通の言語を用いたコミュニケーションの改善
- 開発者と非開発者の間のギャップを埋める
- 仕様がそのままテストケースになることにより、要求から実装への一貫性を保つ

なぜ BDD を提案したのか？
問題意識

1. ​ コミュニケーションの障害 ​
   1. TDD では主に技術者間での議論に焦点が置かれがちであり、ビジネス担当者とのコミュニケーションが疎かになりやすい。
   2. BDD では、「Given-When-Then」形式を使うことで、ビジネス担当者が理解しやすい形式で仕様を表現し、チーム全体の共通理解を深めることが可能になります。
2. 要件理解の不足 ​
   1. TDD はテストコードの分類が詳細なため、大局的なビジネス要件の理解が疎かになることがあります。
   2. BDD はシナリオベースでの開発を行うため、まずビジネスルールや要件の視点を明確にし、それをテストケースとして具体化することができます。
3. ​ テストケースのドキュメント化 ​
   1. TDD の場合、テストコードは技術者向けの記述が多く、非技術者には理解しづらいケースがあります。
   2. BDD は自然言語で記述されたシナリオがそのままドキュメントとして機能するため、非技術者でも読みやすく、要件の追跡性が高まります。

### 結論

TDD と BDD は共に高品質のソフトウェア開発を目指すが、TDD はコードの単体テストに重点を置き、BDD は振る舞いに基づく仕様のコミュニケーションと理解の共有を重視。BDD は特に、ビジネス担当者を含む全チームメンバーとのコミュニケーションの効率化を目的としている。

言いたいことはわかるのだが、TDD より更にワンステップ増える印象で、かなり大変では…？

# 課題 2

[こちら](https://github.com/kzk4043/tdd-node)で実施

- 途中から普通に実装から書いていた。無意識にやってしまっていたので、結構慣れが必要そう。。
- テスト通った時気持ちいい
- 今回のようなケースは各処理の独立性が高くて一つずつテストを書いて → 実装の流れがやりやすかったが、現実でも可能なのか…？それで書きやすい構造にすべきっちゃすべきなのか
- subtract のケースで対象ケースが通るようになると他のケースが落ちるようになって、その時になんとなく仕様に自覚的になった気がした
