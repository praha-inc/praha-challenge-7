## 課題１
とりあえず削除フラグ
### 問題点
- データ取得に常に削除フラグでの絞り込みが必要になる。

### 検証用
- [01_ER図.wsd](./01_ER%E5%9B%B3.wsd)
---
## 課題２
### 解決策
大前提として、必要に応じて削除フラグは使っても良いと思う。だが、すべてのテーブルに適用するなど何も考えずに多用するのは良くない。

1. 物理削除する
2. 外部に履歴テーブルを作成して、トリガーで追加する。（トリガーには、色々問題点もあるのでできれば避けたい）

今回は、解決案として物理削除を提案
- [02_ER図.wsd](./02_ER%E5%9B%B3.wsd)
---
## 課題３
### 問題点（例えばECサイトでの注文）
- 電子商取引における消費者契約法では、業者は契約内容を消費者と同一の形式（電子的形式も含む）で保存することが求められている為、取引履歴を削除すると、支払い情報なども同時に確認できなくなり、法的な問題が生じる可能性がある。
- データを物理削除することにより、過去の取引履歴より分析ができなくなる。
- 関連データの整合性が取れなくなる、可能性がある。

### 問題点（例えば学習塾の進捗管理サービス）
- 生徒が再入会した際に、過去のスコアが確認できなくなる。
- 関連データの整合性が取れなくなる、可能性がある。

### 問題点（他にも、ご自身が過去に開発したサービス）
- 一番最初に開発したサービスのテーブルはすべて物理削除にしていた。（そもそも当時、論理削除という概念を知らなかった）今、振り返ると少なくとも会員情報テーブルは論理削除を採用したほうが良かった。
---
### 参考
[SQLアンチパターン 幻の第26章「とりあえず削除フラグ」](https://www.slideshare.net/t_wada/ronsakucasual)