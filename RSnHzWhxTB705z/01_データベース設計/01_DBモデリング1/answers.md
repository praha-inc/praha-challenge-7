# 回答

MySQL利用想定です！

## 課題1

### スケッチ
[ER図（svg）](./01_01_er_diagram.svg)<br>
[ER図（puml）](./01_01_er_diagram.puml)

### DB構造
[DB構造（md）](./01_01_db_structure.md)
  
### 利用想定

#### あらかじめデータを登録しておくテーブル（マスター系）
登録しておくデータの例は [DB構造（md）](./01_01_db_structure.md) の備考欄に記載しています。
- channels
- order_statuses
- products
- menu_categories
- prices
- product_foods
- foods
#### 使用に伴いデータを登録していくテーブル（トランザクション系）
- orders
- customers
- order_details

#### 処理流れ
1. アプリケーション側であらかじめ以下のテーブルからからレコードをSELECTしておく
   - channels
   - order_statuses
   - products
1. 注文が入ったら、ordersテーブルにレコードを作成
    1. ordersテーブルに紐づく形で、customersテーブルにレコードを作成
    1. ordersテーブルに紐づく形で、商品数の数だけorder_detailsテーブルにレコードを作成
          1. 盛り込みの「はな」、にぎりの「みさき」、お好みの「玉子」、お好みの「まぐろ赤身」の4商品が注文された場合
                1. order_detailsテーブルに「はな」のレコードを追加（product_idはあらかじめSELECTしたものを使用）
                1. order_detailsテーブルに「みさき」のレコードを追加（product_idはあらかじめSELECTしたものを使用）
                1. order_detailsテーブルに「玉子」のレコードを追加（product_idはあらかじめSELECTしたものを使用）
                1. order_detailsテーブルに「まぐろ赤身」のレコードを追加（product_idはあらかじめSELECTしたものを使用）


### 任意課題：物理モデルと論理モデルの違い

#### 論理モデル
- 基本設計工程で作成
- 特定のデータベースに依存しないレベルで具体化した状態
- 必要カラムを書き出したり、カラムに以下の項目を指定したりする
    - 属性
    - 主キー
    - 外部キー
    - リレーション
    
#### 物理モデル
- 詳細設計工程で作成
- 特定のデータベース向けに論理モデルの変換を行う
    - 特定のデータベース : Oracle Database, PostgreSQL, MySQL, など

### 疑問点
- DB構造、どこにどうやって書く？（書類管理の問題）
  - スプレッドシートなど、外部の表ソフトを使った方が絶対にわかりやすい
  - 外部のソフトを使うと、書類が色々なところに散らばり、管理が大変
  - mdだと書きづらい
  - ER図に書き込むと、情報が多すぎてわかりにくい
  - ER図に書き込まないと、カラム名や項目名など、2回書かなければいけない
- DBに入れる値の長さ、どう決める？
  - 最長の人の氏名をググったら1000文字以上だったが、極端に長い場合は通称を使うだろうと255文字にした
  - 入りそうな値を考えておいて、あとは大体の感覚値？
- インデックスどういう場合にどういう風に貼る？（あとで調べる）
