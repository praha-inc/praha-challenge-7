# データベース設計のアンチパターンを学ぶ8

## 課題1

- 業務上の理由や入荷元の影響など、なにかしらの理由でコード体系に変更がある場合に、リレーションしているテーブルすべてに影響がある（WHERE句をすべて変更しなければいけない）
- 一意ではない可能性がある
- 主キーがテーブル毎に異なるため、SQLが煩雑になり、バグや条件落ちの原因となりうる
    - すべてのテーブルが「ID」項目を主キーとしている場合、SQLの条件は「テーブル名.ID」とすればよいところ、ナチュラルキーが主キーの場合、「テーブル名.productCode」などとなる
    - ただし、すべての主キーを「ID」とするのが一概に良いというわけでもない

## 課題2

- サロゲートキーとして、「ID」という主キー、もしくは「テーブル名_ID」という主キーを設定する

## 課題3

- このアンチパターンについては、どんなサービスでも設計次第で問題を抱えうると思う
- 商品管理サービスを開発すると仮定する
    - products テーブルには product_code という主キーを持ち、 suppliers テーブルには supplier_name という主キーを持つ場合、アンチパターンとなる
