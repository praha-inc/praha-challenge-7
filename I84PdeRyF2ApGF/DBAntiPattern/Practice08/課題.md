# データベース設計のアンチパターンを学ぶ8

## 課題１
- 商品の基本的な情報は変えたくないけど、商品コードのみを変更したいという要望が出た場合、主キーを参照している関連テーブルへも更新作業を行う必要があり、データの整合性が損なわれる可能性がある。
- 商品コードは同じであるが、サイズや色などが違うことを別のコード、属性で表す必要が生まれた場合、主キーの一意性を保つことができなくなる。
- 主キーがシーケンシャルな値ではなくなる可能性があるため、新しいデータを挿入するときやデータの参照時にインデックスが効果的に機能せず、パフォーマンスが低下する可能性がある。

## 課題２
[ER図](./ER%E5%9B%B3.md)
- 商品コードとは別でidカラムを追加し、DB側で採番されるシーケンシャルで一意な値が格納されるようにする。
  - 実業務で扱われている概念ではなく、DB内にあるデータを特定するためのid（サロゲートキー）であるため、それ以上に意味を持たない。これにより、管理が簡単になる。
  - シーケンシャルであるため、インデックスが効果的に働き、パフォーマンスも向上。

## 課題３
- 人時管理システム
  - 社員情報を管理するために社員に振られている社員IDをテーブルの主キーに設定。
- ユーザー登録機能
  - ユーザーが登録時に作成したユーザーIDをテーブルの主キーに設定。